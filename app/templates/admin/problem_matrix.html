{% extends "layout.html" %}
{% block content %}
<div class="container py-4" style="max-width: 800px;">
  <h2 class="mb-4">ğŸ“¦ é¢˜åº“çŸ©é˜µè®¾ç½®</h2>

  <!-- è®¾ç½®çŸ©é˜µå¤§å°è¡¨å• -->
  <div class="card mb-4">
    <div class="card-body">
      <form method="post" class="row gx-3 gy-2 align-items-center">
        <div class="col-md-auto">
          <label for="matrix_size" class="form-label">çŸ©é˜µå¤§å°</label>
          <select name="matrix_size" id="matrix_size" class="form-select">
            {% for size in [5, 6, 7] %}
              <option value="{{ size }}" {% if size == config.matrix_size %}selected{% endif %}>{{ size }} x {{ size }}</option>
            {% endfor %}
          </select>
          <br>
          <div class="col-md-auto mt-3 mt-md-0">
            <button type="submit" class="btn btn-danger">
              ä¿®æ”¹å¤§å°ï¼ˆå°†æ¸…ç©ºæ‰€æœ‰é¢˜ç›®ï¼‰
            </button>
          </div>
        </div>


      </form>
    </div>
  </div>

  <!-- çŸ©é˜µå±•ç¤º -->
  <h4 class="mb-3">ğŸ§© å½“å‰é¢˜ç›®çŸ©é˜µ</h4>
  <div class="matrix-grid" style="--matrix-size: {{ config.matrix_size }}; display: grid; grid-template-columns: repeat({{ config.matrix_size }}, 1fr); gap: 10px;">
    {% for i in range(config.matrix_size) %}
      {% for j in range(config.matrix_size) %}
        {% set has_problem = (i, j) in problem_dict %}
        <a href="{{ url_for('admin_bp.edit_problem', row=i, col=j) }}"
           class="square-cell text-decoration-none {{ 'text-dark' if has_problem else 'text-white' }}"
           style="background-color: {{ '#d4edda' if has_problem else '#f5c6cb' }};">
          {{ i }},{{ j }}<br>
          {% if has_problem %}âœ…{% else %}âŒ{% endif %}
        </a>
      {% endfor %}
    {% endfor %}
  </div>
</div>
{% endblock %}
